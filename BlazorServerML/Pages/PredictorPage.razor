@page "/predictor"
@using BlazorServerML.ML
@inject Predictor _predictor

<h3>Predictor</h3>
<hr />
@if (predictionResult == null) {
    <p>Loading...</p>
}
else {
<pre>
    <b>Using model to make single prediction</b>
    Longitude           : @sampleData.Longitude
    Latitude            : @sampleData.Latitude
    Housing median age  : @sampleData.HousingMedianAge
    Total rooms         : @sampleData.TotalRooms
    Total bedrooms      : @sampleData.TotalBedrooms
    Population          : @sampleData.Population
    House holds         : @sampleData.Households
    Median income       : @sampleData.MedianIncome
    Ocean proximity     : @sampleData.OceanProximity
    Median house value  : @predictionResult.PredictedPrice (predicted)
</pre>
}

@code {
    HousingData sampleData;
    HousingPrediction predictionResult;

    protected override async Task OnInitializedAsync()
    {
        sampleData = new HousingData() {
            Longitude = -122.23F,
            Latitude = 37.88F,
            HousingMedianAge = 41F,
            TotalRooms = 880F,
            TotalBedrooms = 129F,
            Population = 322F,
            Households = 126F,
            MedianIncome = 8.3252F,
            OceanProximity = "NEAR BAY",
        };
        // dummy test
        predictionResult = new HousingPrediction {
            PredictedPrice = 123456.25F
        };

        await Task.Delay(500);

        predictionResult = _predictor.Predict(sampleData);

    }
}
